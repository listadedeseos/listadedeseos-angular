<div class="animation-scale relative bg-white bg-opacity-50 backdrop-blur-sm border border-white rounded shadow p-2 flex flex-col gap-1 h-full">

    @if(index){
    <p class="px-2 py-1 bg-gray-300 rounded text-center flex justify-center text-xs">
        <strong>{{index}}</strong>
        @if(count){
        <span class="ms-auto">{{count}} veces</span>
        }
    </p>
    }

    @switch (aspect) {
    @case ('video'){
    <a [href]="principalUrl" target="_blank" class="flex justify-center aspect-video overflow-hidden rounded">
        <img class="w-full h-full object-cover" [src]="img" (error)="onImageError($event)" loading="lazy"
            alt="product image">
    </a>
    }
    @case ('square'){
    <a [href]="principalUrl" target="_blank" class="flex justify-center aspect-square overflow-hidden rounded">
        <img class="w-full h-full object-cover" [src]="img" (error)="onImageError($event)" loading="lazy"
            alt="product image">
    </a>
    }
    @default{
    <a [href]="principalUrl" target="_blank" class="flex justify-center aspect-square overflow-hidden rounded">
        <img class="w-full h-full object-cover" [src]="img" (error)="onImageError($event)" loading="lazy"
            alt="product image">
    </a>
    }
    }
    <!-- 
    <a [href]="principalUrl" target="_blank" class="flex justify-center aspect-video overflow-hidden rounded">
        <img class="w-full h-full object-cover" [src]="img" (error)="onImageError($event)" loading="lazy"
            alt="product image">
    </a>

    <a [href]="principalUrl" target="_blank" class="flex justify-center aspect-square overflow-hidden rounded">
        <img class="w-full h-full object-cover" [src]="img" (error)="onImageError($event)" loading="lazy"
            alt="product image">
    </a> -->

    <a [href]="principalUrl" target="_blank">
        <h5 class="text-xl font-semibold tracking-tight max-h-[3.5rem] overflow-hidden" [title]="name">
            {{name}}
        </h5>
    </a>

    <a [href]="principalUrl" target="_blank" class="mb-auto">
        <h5 [title]="name">{{price}}</h5>
    </a>

    <div class="flex gap-1  lg:flex-row">
        <a [href]="principalUrl" target="_blank" class="transition
            bg-white bg-opacity-50 border-2 border-gray-200 font-medium rounded-lg text-center p-2
            flex flex-col align-center justify-center w-full text-xs
            hover:bg-blue-700 hover:text-white
        ">{{principalLabelString}}</a>

        @if(secondaryUrl){
        <a [href]="secondaryUrl" target="_blank" class="transition
        bg-white bg-opacity-50 border-2 border-gray-200 font-medium rounded-lg text-center p-2
            flex flex-col align-center justify-center w-full text-xs
            hover:bg-orange-700 hover:text-white
        ">{{secondaryLabelString}}</a>
        }
    </div>

    @if(isReserved != undefined){
    @if(isReserved){

    @if(!isLogged){
    <div class="bg-green-600 font-medium rounded-lg text-center p-2
                    flex gap-2 align-center justify-center
                    text-white text-xs">
        <fa-icon [icon]="['fas', 'circle-check']"></fa-icon>
        <p>Reservado</p>
    </div>
    } @else {
    <button (click)="toggleReserve.emit()" class="bg-green-600 font-medium rounded-lg text-center p-2
                    flex gap-2 align-center justify-center
                    text-white text-xs hover:bg-green-700">
        <p>Eliminar reserva</p>
    </button>
    }

    } @else {
    <a role="button" (click)="toggleReserve.emit()" class="
        border border-gray-400 font-medium rounded-lg text-center p-2
        flex gap-2 align-center justify-center
         text-xs
        hover:bg-black hover:text-white">
        <fa-icon [icon]="['fas', 'basket-shopping']"></fa-icon>
        Reservar
    </a>
    }
    }
</div>